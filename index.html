<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>SponsorWins — Phase 2 Prototype</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap" rel="stylesheet">
<style>
:root{
  --ink:#f6f8ff; --muted:#a8b6d6; --gold:#f5c518; --gold2:#ffd86b; --ring:#1d2b56; --edge:rgba(255,255,255,.08);
}
*{box-sizing:border-box} html,body{margin:0;padding:0;background:
  radial-gradient(1600px 900px at 50% -28%, #162b66 0%, #0b1630 55%, #050b18 100%),
  radial-gradient(900px 360px at 72% -6%, rgba(245,197,24,.10), transparent 62%);
  color:var(--ink); font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif}

/* Header */
.header{position:sticky;top:0;z-index:60; backdrop-filter:saturate(120%) blur(6px);
  background:linear-gradient(180deg,rgba(6,11,24,.92),rgba(6,11,24,.70)); border-bottom:1px solid #0f2147}
.header-inner{max-width:1200px;margin:0 auto;padding:14px 20px;display:flex;align-items:center;justify-content:space-between}
.brand{display:flex;align-items:center;gap:12px}
.title{font-weight:900; letter-spacing:.22em; font-size:18px; margin:0}

/* Page wrapper */
.wrap{max-width:1200px;margin:0 auto;padding:20px}

/* Hero */
.hero{margin-top:16px; text-align:center; padding:62px 20px 44px; border:1px solid #132a58; border-radius:22px;
  background:
    radial-gradient(1000px 280px at 50% -14%, rgba(96,136,255,.20), transparent 70%),
    linear-gradient(180deg, rgba(245,197,24,.08), rgba(245,197,24,0) 40%),
    linear-gradient(180deg, #0b1630, transparent),
    url("https://drive.google.com/uc?export=view&id=1ZLKxi8b-xHyaefoESrgg66BABqz546t-") center/cover no-repeat}
.hero h1{font-size:42px; line-height:1.05; margin:0 0 10px; text-shadow:0 4px 24px rgba(0,0,0,.35)}
.hero p{color:var(--muted); margin:0 0 18px}
.cta{display:inline-block; padding:13px 20px; border-radius:12px; text-decoration:none; color:#0b0b0b; font-weight:900;
  background:linear-gradient(180deg,var(--gold),#e3b616); border:1px solid var(--gold); box-shadow:0 14px 40px rgba(245,197,24,.38)}

/* League pills */
.pills{display:flex;gap:8px;justify-content:center;flex-wrap:wrap;margin-top:20px}
.pill{padding:9px 14px;border-radius:999px;border:1px solid var(--ring);background:#0c1736;color:#dbe6ff;cursor:pointer;transition:.15s}
.pill:hover{border-color:#2c4fa0}
.pill.active{background:var(--gold);color:#111;border-color:var(--gold)}

/* Sections / grids */
.section{margin-top:28px}
.section h2{margin:0 0 12px;font-size:22px}
.live-row{display:grid;grid-template-columns:repeat(3,1fr);gap:18px}
.card, .bigcard{background:linear-gradient(180deg,#0f1f41,#0b1530);border:1px solid var(--edge);border-radius:14px;overflow:hidden}
.card .media, .bigcard .thumb{height:200px;background:#0a1430;padding:0;display:block}
.card .body, .bigcard .meta{padding:12px 14px}
.card .title{display:flex;justify-content:space-between;align-items:center}
.card .title strong{font-size:16px} .card .title span{font-weight:800}
.card .sub{font-size:13px;color:#cfe1ff;opacity:.9;margin-top:4px}
.meta2{margin-top:8px;display:flex;gap:14px;color:#a9b6d3;font-size:12px}

.controls{display:grid;grid-template-columns:repeat(4,1fr) 1fr;gap:10px;margin:20px 0}
.field label{display:block;font-size:12px;color:#9fb0cc;margin-bottom:6px}
select,input[type="search"]{width:100%;padding:10px 12px;border-radius:12px;border:1px solid var(--ring);background:#0c1736;color:#fff}
select:focus,input:focus{outline:2px solid #2b4f9e}

.grid{border:1px solid #132a58;border-radius:22px;background:linear-gradient(180deg,#0c1836,#09142c)}
.grid-head{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-bottom:1px solid #132a58}
.grid-body{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:14px;padding:16px}
.bigcard .asset{color:var(--gold2);font-weight:800}
.bigcard .price{font-weight:900;margin-top:6px}

/* Modal */
.modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.65);display:none;align-items:center;justify-content:center;z-index:90}
.modal{width:min(760px,92vw);background:linear-gradient(180deg,#0d1f41,#0a1430);border:1px solid #163061;border-radius:16px;box-shadow:0 30px 100px rgba(0,0,0,.55);overflow:hidden}
.modal-head{display:flex;justify-content:space-between;align-items:center;padding:12px 14px;border-bottom:1px solid #163061}
.modal-body{padding:14px}
.modal-close{background:transparent;border:1px solid #2b4f9e;color:#cfe1ff;border-radius:8px;padding:6px 10px;cursor:pointer}
.notice{display:flex;gap:10px;align-items:flex-start;background:#0b1734;border:1px dashed #2b4f9e;border-radius:12px;padding:10px;margin:10px 0;color:#cfe1ff}

/* Ticker */
.ticker-wrap{position:relative;margin:22px 0 14px;border-top:1px solid #122a56;border-bottom:1px solid #122a56;background:#0a142b}
.ticker-title{position:absolute;left:16px;top:-10px;background:#0a142b;color:#9fb0cc;font-size:12px;padding:2px 8px;border:1px solid var(--ring);border-radius:6px;letter-spacing:.12em}
.ticker-viewport{overflow:hidden;white-space:nowrap;padding:10px 0;margin-left:8px}
.ticker{display:inline-flex;gap:26px;will-change:transform}
.ticker-item{display:inline-flex;gap:8px;align-items:center;background:#0e1f41;border:1px solid var(--ring);border-radius:999px;padding:6px 10px;font-size:13px}
.ticker-item .dot{width:6px;height:6px;border-radius:999px;background:#17d3a5}
.ticker-item .link{color:#cfe1ff;text-decoration:none}

/* Footer */
.foot{padding:16px;text-align:center;color:#9fb0cc;border-top:1px solid #122a56}

/* Responsive */
@media (max-width:980px){
  .hero h1{font-size:32px}
  .live-row{grid-template-columns:1fr}
  .controls{grid-template-columns:1fr 1fr 1fr}
  .grid-body{grid-template-columns:repeat(auto-fill,minmax(260px,1fr))}
}
</style>
</head>
<body>
  <!-- HEADER -->
  <header class="header">
    <div class="header-inner">
      <div class="brand">
        <!-- Interlocked SW badge -->
        <svg width="56" height="56" viewBox="0 0 64 64" aria-label="SponsorWins logo" role="img">
          <defs>
            <linearGradient id="sw-grad" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#FFD86B"/><stop offset="1" stop-color="#F5C518"/>
            </linearGradient>
          </defs>
          <rect x="4" y="4" width="56" height="56" rx="14" fill="url(#sw-grad)"/>
          <path d="M12 22l6 20l6-14l6 14l6-20l6 20l6-14l6 14l6-20"
                fill="none" stroke="#0b0b0b" stroke-width="5.5" stroke-linecap="round" stroke-linejoin="round" opacity=".9"/>
          <path d="M46 18h-8c-7.2 0-11.5 2.6-11.5 6.8c0 4.1 4.4 6.5 11.2 6.5h2.8
                   c6.1 0 9.6 2.3 9.6 5.9c0 3.9-4.3 6.6-11.9 6.6H22"
                fill="none" stroke="#0b0b0b" stroke-width="5.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <h2 class="title">SPONSORWINS</h2>
      </div>
    </div>
  </header>

  <main class="wrap">
    <!-- HERO -->
    <section class="hero" aria-label="Hero">
      <h1>Bid. Win. Sponsor the Game.</h1>
      <p>Season-long packages, single-game features, and arena takeovers across NFL, NBA, NHL, MLB, and MLS.</p>
      <a href="#" class="cta" id="verifyBtn">Create a Verified Account to Bid</a>
      <!-- League pills -->
      <div id="leaguePills" class="pills" style="margin-top:22px"></div>
    </section>

    <!-- LIVE AUCTIONS -->
    <section class="section" aria-label="Live Auctions">
      <h2>Live Auctions</h2>
      <div id="liveRow" class="live-row"></div>
    </section>

    <!-- FILTERS -->
    <section class="controls" aria-label="Filters">
      <div class="field"><label for="leagueSelect">League</label><select id="leagueSelect"></select></div>
      <div class="field"><label for="teamSelect">Team</label><select id="teamSelect"></select></div>
      <div class="field"><label for="assetSelect">Asset</label><select id="assetSelect"></select></div>
      <div class="field"><label for="search">Search</label><input id="search" type="search" placeholder="Search by team, stadium, asset"/></div>
      <div class="field"><label for="sort">Sort</label><select id="sort">
        <option value="relevance">Relevance</option>
        <option value="priceAsc">Price ↑</option>
        <option value="priceDesc">Price ↓</option>
      </select></div>
    </section>

    <!-- LISTINGS -->
    <section class="grid" aria-label="Listings">
      <div class="grid-head">
        <strong>Featured Sponsorships</strong>
        <button id="shuffle" class="pill" type="button" style="border-radius:10px">Shuffle</button>
      </div>
      <div id="grid" class="grid-body"></div>
    </section>
  </main>

  <!-- TICKER -->
  <section class="ticker-wrap" aria-label="Recent Activity">
    <div class="ticker-title">RECENT ACTIVITY</div>
    <div class="ticker-viewport"><div id="ticker" class="ticker"></div></div>
  </section>

  <footer class="foot"><p>© 2025 SponsorWins — Prototype Demo</p></footer>

  <!-- MODAL -->
  <div id="modalBackdrop" class="modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="mTitle">
    <div class="modal">
      <div class="modal-head">
        <strong id="mTitle">Listing</strong>
        <button class="modal-close" id="mClose" type="button" aria-label="Close">Close</button>
      </div>
      <div class="modal-body">
        <div class="notice"><strong>Verified bidders only.</strong>&nbsp;Create an account and verify to place live bids in production.</div>
        <div id="mMeta"></div>
      </div>
    </div>
  </div>

<script>
/* -------- Data -------- */
const DATA=(()=>{const core=["Fixed Signage","LED Signage","Naming Rights","Jersey Patch","Helmet Logo","Concourse Signage","Videoboard Signage","Concession Areas"];
const extras={MLB:["Outfield Wall Signage"],NHL:["Dasher-Board Signage","In-Ice Signage"],MLS:["Pitch-Level Signage"]};
const leagues={
NFL:[["Portland Lumberjacks","Timberline Field"],["Las Vegas Vipers","Mojave Bank Stadium"],["Miami Tritons","Oceanview Arena"],["Milwaukee Guardians","Lakefront Field"],["Austin Outlaws","Republic Stadium"],["San Antonio Stampede","Alamo Energy Stadium"],["St. Louis Stallions","Gateway Dome"],["Salt Lake Blizzard","Wasatch Stadium"]],
NBA:[["Portland Pioneers","Rose City Arena"],["Las Vegas Outlaws","Desert Sun Arena"],["Miami Cyclones","Atlantic Bank Center"],["Milwaukee Lakehawks","Brew City Arena"],["Nashville Rhythm","Music City Arena"],["Kansas City Monarchs","Heartland Arena"],["San Diego Surge","Pacific Energy Arena"],["Pittsburgh Iron","Steel City Arena"]],
MLB:[["Portland Beavers","Cascade Ballpark"],["Las Vegas High Rollers","Silver State Stadium"],["Miami Sailfish","Gulf Breeze Park"],["Milwaukee Hammers","Brew Park"],["Charlotte Copperheads","Queen City Field"],["Oklahoma City Wranglers","Prairie Bank Ballpark"],["Sacramento Gold","Capital Field"],["Louisville Legends","Derby Park"]],
NHL:[["Portland Glaciers","Rose Ice Arena"],["Las Vegas Outlaws","Desert Chill Arena"],["Miami Barracudas","Ocean Ice Center"],["Milwaukee Blizzard","Brew Ice Arena"],["Quebec Voyageurs","St. Lawrence Ice Centre"],["Houston Polar Bears","Lone Star Arena"],["Kansas City Kodiaks","Heartland Icehouse"],["Anchorage Northern Lights","Aurora Ice Center"]],
MLS:[["Portland Cascades","Timberline Park"],["Las Vegas Scorpions","Mojave Bank Field"],["Miami Waves","Atlantic Energy Stadium"],["Milwaukee Forge","Lakefront Pitch"],["Phoenix Heatwave","Sonoran Bank Stadium"],["Raleigh Oaks","Carolina Pitch Park"],["San Diego Breakers","Pacific Pitch Arena"],["Detroit Grit","Motor City Field"]]};
const ranges={NFL:{low:25000,high:10000000},NBA:{low:15000,high:8000000},MLB:{low:10000,high:6000000},NHL:{low:8000,high:4000000},MLS:{low:5000,high:2000000}};
const brands=["Glacier Water Co.","Solarix Energy","Frontier Bank","Skyline Tech","Maverick Brewing","Trailblazer Insurance","Rapid Ride E-Bikes","Aurora Health","Goldline Logistics","Oceanic Airlines","Beacon Coffee","Summit Outdoors","Blue Harbor Media","NovaCloud","Atlas Freight"];
function assetsFor(l){return core.concat(extras[l]||[]);} return {leagues,ranges,brands,assetsFor};})();

/* -------- Visual helpers & asset scenes (inline SVG) -------- */
function crestInitials(team){ return team.split(' ').map(w=>w[0]).slice(0,2).join('').toUpperCase(); }
function colorFor(team){ const h=[...team].reduce((a,c)=>a+c.charCodeAt(0),0)%360; return [`hsl(${h} 70% 52%)`,`hsl(${(h+28)%360} 70% 62%)`]; }

function sceneSVG(asset, team){
  const [base, acc] = colorFor(team);
  const inits = crestInitials(team);
  const defs = `
    <defs>
      <linearGradient id="bg" x1="0" y1="0" x2="1" y2="1">
        <stop offset="0" stop-color="#0f2148"/><stop offset="1" stop-color="#07142c"/>
      </linearGradient>
      <linearGradient id="glow" x1="0" y1="0" x2="1" y2="1">
        <stop offset="0" stop-color="${acc}"/><stop offset="1" stop-color="${base}"/>
      </linearGradient>
      <filter id="noise"><feTurbulence baseFrequency="0.9" numOctaves="2" type="fractalNoise" stitchTiles="stitch"/><feColorMatrix type="saturate" values="0.15"/><feBlend mode="soft-light"/></filter>
      <clipPath id="r8"><rect x="0" y="0" width="360" height="200" rx="12"/></clipPath>
    </defs>`;
  let art = `<g clip-path="url(#r8)"><rect width="100%" height="100%" fill="url(#bg)"/><rect width="100%" height="100%" filter="url(#noise)" opacity=".05"/>`;

  if (/Jersey Patch/i.test(asset)) {
    art += `
      <rect x="20" y="18" width="320" height="180" rx="10" fill="#0c1736" stroke="#1b3a78"/>
      <path d="M70 40 q50-40 120 0 q70 40 120 0 v120 h-240z" fill="#122a58"/>
      <rect x="250" y="28" width="52" height="52" rx="8" fill="${acc}" stroke="${base}" stroke-width="3"/>
      <text x="276" y="60" font-size="22" text-anchor="middle" fill="#0a0a0a" font-weight="900">${inits}</text>
      <text x="40" y="54" font-size="18" fill="#cfe1ff" opacity=".9">AUTHENTIC JERSEY</text>`;
  } else if (/Helmet Logo/i.test(asset)) {
    art += `
      <path d="M60 150 q0-90 120-90 q90 0 120 60 v70 h-44 v-22 q-42 18 -106 18 q-54 0 -90 -36z" fill="#142a56" stroke="#2b4fa0" stroke-width="4"/>
      <circle cx="150" cy="120" r="22" fill="white" stroke="${base}" stroke-width="4"/>
      <text x="150" y="126" font-size="18" text-anchor="middle" font-weight="900" fill="${base}">${inits}</text>
      <circle cx="220" cy="150" r="10" fill="#0b0b0b"/><circle cx="220" cy="150" r="4" fill="#9aa7c8"/>`;
  } else if (/LED/i.test(asset)) {
    art += `
      <rect x="20" y="80" width="320" height="28" rx="6" fill="#05112a" stroke="#21408a"/>
      <rect x="20" y="80" width="320" height="28" rx="6" fill="url(#glow)" opacity=".25"/>
      <text x="180" y="99" font-size="16" text-anchor="middle" fill="#cfe1ff" font-weight="800">LED RIBBON BOARD • ${inits}</text>`;
  } else if (/Videoboard/i.test(asset)) {
    art += `
      <rect x="40" y="24" width="280" height="130" rx="10" fill="#111" stroke="#333"/>
      <rect x="48" y="32" width="264" height="114" rx="8" fill="#213a78"/>
      <text x="180" y="100" font-size="18" text-anchor="middle" fill="#dbe7ff" font-weight="800">CENTER-HUNG VIDEOBOARD</text>`;
  } else if (/Fixed Signage/i.test(asset)) {
    art += `
      <rect x="40" y="70" width="280" height="46" rx="8" fill="#123a6a"/>
      <text x="180" y="98" font-size="18" text-anchor="middle" fill="#dbe7ff">FIXED SIGNAGE</text>`;
  } else if (/Concourse|Concession/i.test(asset)) {
    art += `
      <rect x="24" y="44" width="312" height="60" rx="8" fill="#1a2f5a"/>
      <text x="180" y="82" font-size="18" text-anchor="middle" fill="#dbe7ff">CONCOURSE / CONCESSION</text>`;
  } else if (/Outfield Wall/i.test(asset)) {
    art += `
      <rect x="0" y="140" width="360" height="40" fill="#083a2a"/>
      <rect x="16" y="144" width="80" height="28" rx="4" fill="${acc}"/>
      <rect x="108" y="144" width="100" height="28" rx="4" fill="${base}"/>
      <rect x="222" y="144" width="120" height="28" rx="4" fill="#ffe082"/>
      <text x="180" y="128" font-size="18" text-anchor="middle" fill="#dfe9ff">OUTFIELD WALL SIGNAGE</text>`;
  } else if (/Dasher-Board/i.test(asset)) {
    art += `
      <rect x="0" y="150" width="360" height="30" fill="#ffffff" />
      <rect x="12" y="154" width="80" height="22" fill="${acc}" />
      <rect x="104" y="154" width="100" height="22" fill="${base}" />
      <rect x="216" y="154" width="130" height="22" fill="#ffe082" />
      <rect x="0" y="180" width="360" height="10" fill="#cfe6ff" opacity=".6"/>
      <text x="180" y="130" font-size="16" text-anchor="middle" fill="#dfe9ff">DASHER-BOARD SIGNAGE</text>`;
  } else if (/In-Ice/i.test(asset)) {
    art += `
      <circle cx="180" cy="110" r="58" fill="#e8f3ff" opacity=".85" stroke="#9cc"/>
      <text x="180" y="114" font-size="28" text-anchor="middle" font-weight="900" fill="${base}">${inits}</text>
      <text x="180" y="150" font-size="14" text-anchor="middle" fill="#cfe1ff">IN-ICE LOGO</text>`;
  } else if (/Pitch-Level/i.test(asset)) {
    art += `
      <rect x="0" y="150" width="360" height="30" fill="#0c5a2a"/>
      <rect x="20" y="154" width="320" height="22" rx="4" fill="${base}" opacity=".9"/>
      <text x="180" y="170" font-size="13" text-anchor="middle" fill="#0b0b0b" font-weight="900">PITCH-LEVEL SIGNAGE</text>
      <path d="M300 80 q-12 10 -10 26 l8 12 h16 l8-12 q2-16 -10-26z" fill="#1b2c57" opacity=".8"/>`;
  } else {
    art += `<text x="180" y="110" font-size="18" text-anchor="middle" fill="#dbe9ff">SPONSORSHIP ASSET</text>`;
  }

  // crest tag
  art += `
    <rect x="14" y="14" width="70" height="28" rx="6" fill="url(#glow)" opacity=".85" />
    <text x="49" y="33" font-size="16" text-anchor="middle" font-weight="900" fill="#0b0b0b">${inits}</text>
  `;
  art += `</g>`;
  return `<svg viewBox="0 0 360 200" role="img" aria-label="${asset} mock">${defs}${art}</svg>`;
}
function sceneInline(asset, team){ const wrap=document.createElement('div'); wrap.innerHTML=sceneSVG(asset,team); return wrap.firstChild; }

/* -------- Utilities -------- */
function currency(n){return n.toLocaleString('en-US',{style:'currency',currency:'USD',maximumFractionDigits:0});}
function randIn(l){const r=DATA.ranges[l],base=Math.random()*(r.high-r.low)+r.low,step=base>50000?1000:100;return Math.round(base/step)*step;}
function randBrand(){const a=DATA.brands;return a[Math.floor(Math.random()*a.length)];}

/* -------- Header / CTA -------- */
document.getElementById('verifyBtn').onclick=(e)=>{e.preventDefault(); alert('Prototype: account verification flow');};

/* -------- Live Auctions -------- */
const liveRow=document.getElementById('liveRow');
function liveCard(team, asset, price){
  const el=document.createElement('article'); el.className='card';
  el.innerHTML = `<div class="media"></div>
    <div class="body">
      <div class="title"><strong>${team}</strong><span>${currency(price)}</span></div>
      <div class="sub">${asset}</div>
      <div class="meta2"><div>12 HRS</div><div>134 MIN</div></div>
    </div>`;
  el.querySelector('.media').appendChild(sceneInline(asset, team));
  return el;
}
(function seedLive(){
  liveRow.innerHTML = "";
  liveRow.appendChild(liveCard('Portland Pioneers', 'Jersey Patch', 25000));
  liveRow.appendChild(liveCard('Las Vegas Vipers', 'LED Signage', 32000));
  liveRow.appendChild(liveCard('Miami Waves', 'Pitch-Level Signage', 18000));
})();

/* -------- League pills + filters + listings -------- */
const pills=document.getElementById('leaguePills'), leagueSel=document.getElementById('leagueSelect'),
teamSel=document.getElementById('teamSelect'), assetSel=document.getElementById('assetSelect'),
grid=document.getElementById('grid'), shuffle=document.getElementById('shuffle'),
ticker=document.getElementById('ticker'), search=document.getElementById('search'), sort=document.getElementById('sort');

const leagues=Object.keys(DATA.leagues);
function buildPills(){pills.innerHTML=''; leagues.forEach((lg,i)=>{const b=document.createElement('button'); b.className='pill'+(i===0?' active':''); b.textContent=lg; b.onclick=()=>{[...pills.children].forEach(c=>c.classList.remove('active')); b.classList.add('active'); leagueSel.value=lg; populateTeamAsset(lg); render();}; pills.appendChild(b);});}
function buildSelects(){leagueSel.innerHTML=''; leagues.forEach((lg,i)=>{const o=document.createElement('option'); o.value=lg; o.textContent=lg; leagueSel.appendChild(o); if(i===0) leagueSel.value=lg;}); populateTeamAsset(leagueSel.value);}
function populateTeamAsset(lg){teamSel.innerHTML='<option value="">Any team</option>'; DATA.leagues[lg].forEach(([t,s])=>{const o=document.createElement('option'); o.value=t; o.textContent=t; o.dataset.stadium=s; teamSel.appendChild(o);}); assetSel.innerHTML='<option value="">Any asset</option>'; DATA.assetsFor(lg).forEach(a=>{const o=document.createElement('option'); o.value=a; o.textContent=a; assetSel.appendChild(o);});}

leagueSel.onchange=()=>{[...pills.children].forEach(c=>c.classList.remove('active')); const idx=leagues.indexOf(leagueSel.value); if(idx>-1) pills.children[idx].classList.add('active'); populateTeamAsset(leagueSel.value); render();};
teamSel.onchange=render; assetSel.onchange=render; search?.addEventListener('input', render); sort.onchange=render;

/* Listing cards */
function bigCard({lg,team,stadium,asset,price}){
  const el=document.createElement('article'); el.className='bigcard';
  el.innerHTML=`<div class="thumb"></div>
    <div class="meta">
      <div class="asset">${asset}</div>
      <div style="opacity:.9">${team}</div>
      <div style="opacity:.75">${stadium}</div>
      <div class="price">${currency(price)}</div>
    </div>`;
  el.querySelector('.thumb').appendChild(sceneInline(asset, team));
  el.onclick=()=>openModal({lg,team,stadium,asset,price});
  return el;
}
function dataset(){
  const lg=leagueSel.value, teams=DATA.leagues[lg], assets=DATA.assetsFor(lg);
  const q=(document.getElementById('search')?.value||'').toLowerCase(), tf=teamSel.value||'', af=assetSel.value||'';
  let list=[];
  teams.forEach(([t,s])=>{
    assets.forEach(a=>{
      const hay=(t+' '+s+' '+a).toLowerCase();
      if((!q||hay.includes(q))&&(!tf||tf===t)&&(!af||af===a)) list.push({lg,team:t,stadium:s,asset:a,price:randIn(lg)});
    });
  });
  if(sort.value==='priceAsc') list.sort((x,y)=>x.price-y.price);
  if(sort.value==='priceDesc') list.sort((x,y)=>y.price-x.price);
  return list.slice(0,15);
}
function render(){ grid.innerHTML=''; dataset().forEach(x=>grid.appendChild(bigCard(x))); }
shuffle.onclick=render;

/* -------- Modal -------- */
const mBackdrop=document.getElementById('modalBackdrop'), mClose=document.getElementById('mClose'), mTitle=document.getElementById('mTitle'), mMeta=document.getElementById('mMeta');
function openModal({lg,team,stadium,asset,price}){mTitle.textContent=`${team} — ${asset}`; mMeta.innerHTML=`<p><strong>${lg}</strong> • ${stadium}<br/>Reserve: <strong>${currency(price)}</strong></p>`; mBackdrop.style.display='flex';}
mClose.onclick=()=>mBackdrop.style.display='none'; mBackdrop.onclick=(e)=>{if(e.target===mBackdrop) mBackdrop.style.display='none';};

/* -------- Ticker -------- */
let items=[]; let last=0; let offset=0;
function newItem(){
  const lg=leagues[Math.floor(Math.random()*leagues.length)];
  const [team]=DATA.leagues[lg][Math.floor(Math.random()*DATA.leagues[lg].length)];
  const asset=DATA.assetsFor(lg)[Math.floor(Math.random()*DATA.assetsFor(lg).length)];
  const price=currency(randIn(lg)), br=randBrand();
  const a=document.createElement('a'); a.href="#"; a.className='link'; a.onclick=e=>e.preventDefault();
  a.textContent=`${br} bid ${price} on ${asset} • ${team} (${lg})`;
  const span=document.createElement('span'); span.className='ticker-item'; const dot=document.createElement('span'); dot.className='dot';
  span.appendChild(dot); span.appendChild(a); ticker.appendChild(span); items.push(span);
}
function seed(n=14){for(let i=0;i<n;i++) newItem();}
function animate(ts){
  if(!last) last=ts; const dt=ts-last; last=ts; const speed=50; offset-=(speed*dt/1000);
  ticker.style.transform=`translateX(${offset}px)`;
  if(items.length){
    const first=items[0];
    const rect=first.getBoundingClientRect();
    const holder=ticker.parentElement.getBoundingClientRect();
    if(rect.right<holder.left){const w=first.offsetWidth+26; ticker.removeChild(first); items.shift(); offset+=w;}
  }
  if(Math.random()<dt/5000){newItem();}
  requestAnimationFrame(animate);
}

/* -------- Init -------- */
(function init(){
  buildPills(); buildSelects(); render();
  seed(14); requestAnimationFrame(animate);
})();
</script>
</body>
</html>
